import"./index.css";import jpg from"./images/image.jpg";var audioContext=null,brownNoiseNode=null,gainNode=null,isPlaying=!1;function createBrownNoise(e){var o=e.createScriptProcessor(4096,1,1),n=0;return o.onaudioprocess=function(e){for(var o=e.outputBuffer.getChannelData(0),t=0;t<4096;t++){var i=2*Math.random()-1;o[t]=(n+.02*i)/1.02,n=o[t],o[t]*=1}},o}function fadeVolume(e,o){if(gainNode){var n=audioContext.currentTime;gainNode.gain.cancelScheduledValues(n),gainNode.gain.setValueAtTime(gainNode.gain.value,n),gainNode.gain.linearRampToValueAtTime(e,n+o)}}function toggleNoise(){var e=document.getElementById("noiseButton");isPlaying?(fadeVolume(0,.4),setTimeout((function(){brownNoiseNode&&brownNoiseNode.disconnect(),gainNode&&gainNode.disconnect(),gainNode=null,brownNoiseNode=null}),2e3),e.textContent="включить звук"):(audioContext||(audioContext=new(window.AudioContext||window.webkitAudioContext)),brownNoiseNode||(brownNoiseNode=createBrownNoise(audioContext)),gainNode||((gainNode=audioContext.createGain()).gain.setValueAtTime(0,audioContext.currentTime),brownNoiseNode.connect(gainNode).connect(audioContext.destination)),fadeVolume(1,.4),e.textContent="выключить звук"),isPlaying=!isPlaying}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("noiseButton").addEventListener("click",toggleNoise)}));